{"version":3,"sources":["components/Movies/Movies.jsx","data-api/data-api.js","components/Hits/Hits.module.css","components/Hits/HitsList/HitsList.module.css","components/Hits/HitsList/HitsList.jsx","components/Hits/Hits.jsx","components/Movies/Movies.module.css"],"names":["MoviesPage","useState","value","setValue","useEffect","query","localStorage","getItem","className","s","SearchBar","SearchForm","onSubmit","e","preventDefault","target","lastChild","toLowerCase","trim","setItem","type","SearchForm__button","SearchForm__input","autoComplete","autoFocus","placeholder","defaultValue","flag","axios","require","defaults","baseURL","params","api_key","getTrend","a","page","get","data","getSearch","search","getDetail","id","getCast","getReview","module","exports","HitsList","path","useRouteMatch","length","map","i","original_title","hits_item","hits__link","to","onClick","Hits","setData","isLoading","setIsLoading","err","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","warn","isTrue","results","trend","renderList","text","hits_title","hits_list","Loader"],"mappings":"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","file":"static/js/MoviesPage.6b4e3d0e.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\n\nimport s from './Movies.module.css';\nimport Hits from '../Hits/Hits';\n\nfunction MoviesPage() {\n  const [value, setValue] = useState(null);\n\n  useEffect(() => {\n    const query = localStorage.getItem('query');\n    setValue(query);\n  }, []);\n\n  const handlerSubmit = e => {\n    e.preventDefault();\n    const query = e.target.lastChild.value.toLowerCase().trim();\n    localStorage.setItem('query', query);\n    setValue(query);\n  };\n\n  return (\n    <>\n      <header className={s.SearchBar}>\n        <form className={s.SearchForm} onSubmit={handlerSubmit}>\n          <button type=\"submit\" className={s.SearchForm__button}>\n            <span className=\"s.SearchForm-button-label\"></span>\n          </button>\n          <input\n            className={s.SearchForm__input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos...\"\n            defaultValue={value}\n          />\n        </form>\n      </header>\n      <Hits flag={false} query={value} />\n    </>\n  );\n}\nexport default MoviesPage;\n","const axios = require('axios');\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\nconst apiKey = '78f2432cb0b978404715fbeff43c36be';\n\naxios.defaults.params = {\n  api_key: apiKey,\n};\n\nconst getTrend = async (page = 1) => {\n  const { data } = await axios.get(`/trending/all/day?page=${page}`);\n  return data;\n};\n\nconst getSearch = async (search, page = 1) => {\n  const { data } = await axios.get(\n    `/search/movie?language=en-US&page=${page}&include_adult=false&query=${search}`,\n  );\n  return data;\n};\n\nconst getDetail = async id => {\n  const { data } = await axios.get(`/movie/${id}?language=en-US`);\n  return data;\n};\n\nconst getCast = async id => {\n  const { data } = await axios.get(`/movie/${id}/credits?language=en-US`);\n  return data;\n};\n\nconst getReview = async (id, page = 1) => {\n  const { data } = await axios.get(\n    `/movie/${id}/reviews?language=en-US&page=${page}`,\n  );\n  return data;\n};\n\nexport { getTrend, getSearch, getDetail, getCast, getReview };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hits_title\":\"Hits_hits_title__1c5Oe\",\"hits_list\":\"Hits_hits_list__FdrtX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hits_item\":\"HitsList_hits_item__1_Lqj\",\"hits_link\":\"HitsList_hits_link__2m4Sh\"};","import React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\n\nimport s from './HitsList.module.css';\n\nconst HitsList = ({ data }) => {\n  const { path } = useRouteMatch();\n\n  return data.length > 0\n    ? data.map(({ original_title, id }, i) => {\n        return (\n          <li key={i} className={s.hits_item}>\n            <Link\n              className={s.hits__link}\n              to={`/movies/${id}`}\n              onClick={() => localStorage.setItem('path', path)}\n            >\n              {original_title}\n            </Link>\n          </li>\n        );\n      })\n    : null;\n};\nexport default HitsList;\n","import { useEffect, useState } from 'react';\nimport { Route } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport s from './Hits.module.css';\nimport { getTrend, getSearch } from '../../data-api/data-api';\nimport Loader from '../Loader/Loader';\nimport HitsList from './HitsList/HitsList';\n\nconst Hits = ({ flag, query }) => {\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const err = () =>\n      toast.error(`ðŸš€ Server error!`, {\n        position: 'bottom-left',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n\n    const warn = isTrue =>\n      toast.warn(\n        `âš ï¸${\n          isTrue\n            ? `Not exist hits on '${query}'`\n            : 'Default hits is not available'\n        } !`,\n        {\n          position: 'bottom-left',\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        },\n      );\n\n    async function trend() {\n      try {\n        setIsLoading(true);\n        const { results } = await getTrend();\n        if (results === null || results.length === 0) return warn(false);\n        setData(results);\n      } catch (e) {\n        err();\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    async function search() {\n      try {\n        setIsLoading(true);\n        const { results } = await getSearch(query);\n        if (results === null || results.length === 0) return warn(true);\n        setData(results);\n      } catch (e) {\n        err(e);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    if (flag) return trend();\n    if (query && !flag) return search(query);\n  }, [query, flag]);\n\n  const renderList = text => {\n    return (\n      <>\n        <h1 className={s.hits_title}> {text} </h1>\n        <Route>\n          <ul className={s.hits_list}>\n            <HitsList data={data} />\n          </ul>\n          {isLoading && <Loader />}\n        </Route>\n      </>\n    );\n  };\n\n  return (\n    <>\n      {flag && renderList('Trending today')}\n      {!flag && query && renderList('Search list')}\n      {!flag && !query && <h1 className={s.hits_title}> Just empty query</h1>}\n    </>\n  );\n};\n\nexport default Hits;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchBar\":\"Movies_SearchBar__3CzUp\",\"SearchForm\":\"Movies_SearchForm__3qmf3\",\"SearchForm__button\":\"Movies_SearchForm__button__r68tS\",\"SearchForm__button-label\":\"Movies_SearchForm__button-label__1Wxsn\",\"SearchForm__input\":\"Movies_SearchForm__input__1fQkc\"};"],"sourceRoot":""}